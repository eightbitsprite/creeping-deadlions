<!doctype html>
<html>
<head>
	<title>Creeping Deadlions</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Bootstrap -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-theme.min.css" rel="stylesheet">

	<!-- jQuery (necessary for Bootstrap's Javascript plugins) -->
	<script src="https://code.jquery.com/jquery.js"></script>
	<!-- More Javascript plugins (Bootstrap and personal scripts) -->
	<script src="js/bootstrap.min.js"></script>
	<script src="js/helpers.js"></script>
	<script src="js/index_scripts.js"></script>

	<!-- Imported Google Fonts -->
	<link href='https://fonts.googleapis.com/css?family=Anton' rel='stylesheet' type='text/css'>
	<!-- Personal stylesheet -->
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->        

</head> 

<body>
<input type="hidden" value ="{{current_user}}" name="current_user" id="current_user_data"/>
<div id="main" class="container-fluid">
	<!-- Maybe add 'navbar-fixed-top' to have constant navbar presence in app? -->
	<nav class="navbar navbar-fixed-bottom navbar-default" id="main-nav">
		<div class="container-fluid">
			<!-- Brand & toggle grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse" aria-expanded="false">
					<span class="sr-only">Toggle Navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<!-- Maybe replace text brand with an undead lion icon in the future 
				<a class="navbar-brand" href="#"><span id="title">C.D.</span></a>
				-->
			</div>

			<!-- Nav links & buttons for toggling -->
			<div class="collapse navbar-collapse" id="navbarCollapse">
			<ul class="nav navbar-nav">
				<li>
					<a href="#" id="menu_log">Log</a></li>
				<li>
					<a href="#" id="menu_history">Hist</a></li>
				<!-- CONFIRM: separate help section for the log screen; village screen will have its own 'help' section? -->
				<li>
					<a href="#" id="menu_help">???</a></li>
				<li>
					<a href="#" id="menu_village">Villa</a></li>
				<li>
					<a href="/login#sign-in">Log Out</a></li>
			</ul>
		<!-- Commented out, because village functionality is now on same page
			<ul class="nav navbar-nav navbar-right">
				<li><a id="transition_btn" href="village"><span class="glyphicon glyphicon-home"></span>  Village</a></li>
			</ul>
		-->
			</div>
		</div>
	</nav>	

<!-- The mission log portion of the app -->
	<div id="missions" class="row">
		<div id="missions-list-wrapper">
			<ul id="missions-list" class="list-unstyled">
				{{#each task}}
	        		<li class="mission_box container">
	        			<form role="form" method="post" action="mission_complete">
	        				<input type="hidden" value="{{this}}" name="mission_data"/>
		        			<div class="runner-progress">
		        				<img src="/images/lion-run-test.gif" class="gif"/>
		        				<span class="distance">{{#each subtasks}}&nbsp;&nbsp;{{/each}}</span>
		        				<img src="/images/run-test.gif" class="gif"/>
		        			</div>
		        			<h4 class="pull-right">
		        				{{#if deadline}}
		        					Due on: {{deadline}}
		        					{{#if time_due}}at: {{time_due}}{{/if}}
		        				{{else}}
		        					Repeat until: {{deadline}}
		        				{{/if}}
		        			</h4>
		        			<h3>Mission: {{title}}</h3>
		        			<ul class="list-unstyled subtasks-list">
		        				{{#each subtasks}}
		        					<h4><input id="{{title}}" type="checkbox"/><label for="{{title}}">{{title}}</label></h4>
		        				{{/each}}
		        			</ul>
		        			<a class="btn btn-default pull-right cancel_mission">Cancel</a>
		        			<button type ="submit" class="btn btn-primary pull-right">Complete!</button>
	        			</form>
	        		</li>
	        	{{else}}<h3><em>No missions to display.</em></h3>
	        	{{/each}}
			</ul>

			<!-- Columns adjust based on size -->
			<div class="col-xs-1 visible-xs-block text-center new_msn_btn"><a href="create_mission">+</a></div>
			<div class="col-md-1 hidden-xs hidden-sm text-center new_msn_btn"><a href="create_mission">+  New Mission<a></div>
		</div>
	</div>

	<!-- The history portion of the app -->
	<div id="history">
		<h4>You have no completed or failed missions! Go on and do some!</h4>
	</div>

	<!-- The help portion of the app -->
	<div id="help">
		<h3> General Mechanics </h4>
		<p>In order to improve the village the runners live in, you must send out runners to retrieve necessary resources for village upgrades. Unfortunately, each time they leave the warm glow of the campfire, they risk discovery (and digestion) by the deadlions. Whether they live or not is up to whether or not <em>you</em> finish the task corresponding to them.
		</p>
		<h4>'Mission' Screen</h4>
		<p>
			This is a current list of all runners out in the field, and the task you must complete in order for them to escape the deadlion and bring back valuable resources to their village.

			A deadlined mission is marked complete when you hit the 'Complete' button after finishing all the subtasks to particular to that specific mission, while a recurring mission can only be marked complete at the end of the current month.
		</p>
		<h4> 'History' Screen </h4>
		<p>
			Here is all your previous missions - whether they ended with the happy return of a runner into the camp, or the horrified last gasps of a living, sentient person being torn apart by the jaws of an undead feline.
		</p>
	</div>

	<!-- The village section of the app -->
	<div id="village">
		<h1>My Village</h1>
		<p>People you have saved will appear here</p>
		<div id="village_display" class="container-fluid">
			<!--<img id="village" src="/images/basic_overworld.png"/>-->
			<div id="gradient0">&nbsp;</div>
			<div id="gradient1">&nbsp;</div>
			<div id="gradient2">&nbsp;</div>
			<div id="campfire"><img src="/images/village_stage01.gif"/></div>
			<!--
			<div><img src="{{image_link}}"></div>

			<div>
				<label>Wood: {{wood_count}}/{{wood_total}}</label>
				<label>Stone: {{stone_count}}/{{stone_total}}</label>
				<label>Food: {{food_count}}/{{food_total}}</label>
			</div>
-->
		</div>
	</div>

</div>
<script type="text/javascript">
    Parse.initialize("YXlPjDOZPGg2dnC4z2XBGHk5xg8jirJVclFEMTmo", "IWqi5XWUalPKb9uXMX8WCkFNaEuyrIxTzOeH9tPH");
    
    /*
    var TestObject = Parse.Object.extend("TestObject");
    var testObject = new TestObject();
      testObject.save({foo: "bar"}, {
      success: function(object) {
        $(".success").show();
      },
      error: function(model, error) {
        $(".error").show();
      }
    });*/
  </script>
</html>